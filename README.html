<!DOCTYPE html>
<html>
  <head>
    <title>README</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

    <script type="text/javascript" charset="utf-8">
      relpath = '';
      if (relpath != '') relpath += '/';
    </script>

    <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/app.js"></script>
  </head>

  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>

    <div id="content">
      <div class="breadcrumbs">exredis v0.1.0 &rarr; <a href="readme.html">README</a></div>
      <h2>exredis &mdash; Redis client for Elixir</h2>
<hr/ class="thin">\n<p><a href="https://travis-ci.org/artemeff/exredis"><img src="https://travis-ci.org/artemeff/exredis.png?branch=master" alt="Build Status"/></a></p>
<p><a href="https://bitdeli.com/free" title="Bitdeli Badge"><img src="https://d2weczhvl823v0.cloudfront.net/artemeff/exredis/trend.png" alt="Bitdeli Badge"/></a></p>
<hr/ class="thin">\n<h3>Installation</h3>
<p>Add this to the dependencies:</p>
<pre><code class="elixir">{ :exredis, github: &quot;artemeff/exredis&quot;, tag: &quot;0.1.0&quot; }</code></pre>
<hr/ class="thin">\n<h3>Usage</h3>
<p><strong>As mixin</strong></p>
<pre><code class="elixir">defmodule Pi do
  use Exredis

  def get, do: start |&gt; query [&quot;GET&quot;, &quot;Pi&quot;]
  def set, do: start |&gt; query [&quot;SET&quot;, &quot;Pi&quot;, &quot;3.14&quot;]
end

Pi.set
# =&gt; &quot;OK&quot;

Pi.get
# =&gt; &quot;3.14&quot;</code></pre>
<pre><code class="elixir">defmodule Api do
  use Exredis.Api

  def set(client), do:
    client |&gt; set &quot;key&quot;, &quot;value&quot;

  def get(client), do:
    client |&gt; get &quot;key&quot;

end

client = Exredis.start

client |&gt; Api.set
# =&gt; &quot;OK&quot;

client |&gt; Api.get
# =&gt; &quot;value&quot;</code></pre>
<p><strong>Connect to the Redis server</strong></p>
<pre><code class="elixir">client = Exredis.start
# or
client = Exredis.start_using_connection_string(&quot;redis://127.0.0.1:6379&quot;)
# or
{ :ok, client } = Exredis.start_link</code></pre>
<p><strong>Disconnect from the server</strong></p>
<pre><code class="elixir">client |&gt; Exredis.stop</code></pre>
<p><strong>Set &amp; Get</strong></p>
<pre><code class="elixir"># set
client |&gt; Exredis.query [&quot;SET&quot;, &quot;FOO&quot;, &quot;BAR&quot;]

# get
client |&gt; Exredis.query [&quot;GET&quot;, &quot;FOO&quot;]
# =&gt; &quot;BAR&quot;</code></pre>
<p><strong>Mset &amp; Mget</strong></p>
<pre><code class="elixir"># mset
client |&gt; Exredis.query [&quot;MSET&quot; | [&quot;key1&quot;, &quot;value1&quot;, &quot;key2&quot;, &quot;value2&quot;, &quot;key3&quot;, &quot;value3&quot;]]

# mget
client |&gt; Exredis.query [&quot;MGET&quot; | [&quot;key1&quot;, &quot;key2&quot;, &quot;key3&quot;]]
# =&gt; [&quot;value1&quot;, &quot;value2&quot;, &quot;value3&quot;]</code></pre>
<p><strong>Transactions</strong></p>
<pre><code class="elixir"># start
client |&gt; Exredis.query [&quot;MULTI&quot;]

# exec
client |&gt; Exredis.query [&quot;SET&quot;, &quot;foo&quot;, &quot;bar&quot;]
client |&gt; Exredis.query [&quot;SET&quot;, &quot;bar&quot;, &quot;baz&quot;]

# commit
client |&gt; Exredis.query [&quot;EXEC&quot;]</code></pre>
<p><strong>Pipelining</strong></p>
<pre><code class="elixir">client |&gt; Exredis.query_pipe [[&quot;SET&quot;, :a, &quot;1&quot;], [&quot;LPUSH&quot;, :b, &quot;3&quot;], [&quot;LPUSH&quot;, :b, &quot;2&quot;]]</code></pre>
<p><strong>Pub/sub</strong></p>
<pre><code class="elixir">client_sub = Exredis.Sub.start
client = Exredis.start
pid = Kernel.self

client_sub |&gt; Exredis.Sub.subscribe &quot;foo&quot;, fn(msg) -&gt;
  send(pid, msg)
end

receive do
  msg -&gt;
    IO.inspect msg
    # =&gt; { :subscribed, &quot;foo&quot;, #PID&lt;0.85.0&gt; }
end

client |&gt; Exredis.Api.publish &quot;foo&quot;, &quot;Hello World!&quot;

receive do
  msg -&gt;
    IO.inspect msg
    # =&gt; { :message, &quot;foo&quot;, &quot;Hello World!&quot;, #PID&lt;0.85.0&gt; }
end</code></pre>
<p><strong>Pub/sub by a pattern</strong></p>
<pre><code class="elixir">client_sub = Exredis.Sub.start
client = Exredis.start
pid = Kernel.self

client_sub |&gt; Exredis.Sub.psubscribe &quot;bar_*&quot;, fn(msg) -&gt;
  send(pid, msg)
end

receive do
  msg -&gt;
    IO.inspect msg
    # =&gt; { :subscribed, &quot;bar_*&quot;, #PID&lt;0.104.0&gt; }
end

client |&gt; Exredis.Api.publish &quot;bar_test&quot;, &quot;Hello World!&quot;

receive do
  msg -&gt;
    IO.inspect msg
    # =&gt; { :pmessage, &quot;bar_*&quot;, &quot;bar_test&quot;, &quot;Hello World!&quot;, #PID&lt;0.104.0&gt; }
end</code></pre>
<p><strong>Scripting</strong></p>
<pre><code class="elixir">client |&gt; Exredis.Api.script_load &quot;return 1 + 1&quot;
# =&gt; &quot;c301e0c5bc3538d2bad3fdbf2e281887e643ada4&quot;
client |&gt; Exredis.Api.evalsha &quot;c301e0c5bc3538d2bad3fdbf2e281887e643ada4&quot;, 0, [&quot;key1&quot;], [&quot;argv1&quot;]
# =&gt; &quot;2&quot;

defmodule MyScripts do
  use Exredis.Script

  defredis_script :lua_echo, &quot;return ARGV[1]&quot;
end

client |&gt; MyScripts.lua_echo([&quot;mykey&quot;], [&quot;foo&quot;])
# =&gt; &quot;foo&quot;</code></pre>
<hr/ class="thin">\n<h3>Contributing</h3>
<ol>
<li>Fork it
</li>
<li>Create your feature branch (<code class="inline">git checkout -b my-new-feature</code>)
</li>
<li>Commit your changes (<code class="inline">git commit -am 'add some feature'</code>)
</li>
<li>Push to the branch (<code class="inline">git push origin my-new-feature</code>)
</li>
<li>Create new Pull Request
</li>
</ol>

    </div>
  </body>
</html>

